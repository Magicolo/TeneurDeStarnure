<!DOCTYPE html>
<html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>
    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function ShowNode(node) {
      switch (node.Type) {
        case "Text":
          $("#output").append(node.Value);
          break;
        case "Break":
          $("#output").append("<br/>");
          break;
        case "Delay":
          await sleep(node.Time*1000);
          break;
        case "Sequence":
          for (let i = 0; i < node.Children.length; i++) {
            const element = node.Children[i];
            await ShowNode(element);
          }
          break;
      }
    }

    $(document).ready(function () {

      $.ajax({
        url: "/user/1/getTestContent",
        dataType: "jsonp",
        success: function (data) {
          console.log(data);
          if (data.Success) {
            ShowNode(data.Content.Script);
          }
        }
      });


      $("button").click(function () {

        $("#div1").fadeToggle();
        $("#div2").fadeToggle("slow");
        $("#div3").fadeToggle(3000);
      });
    });
  </script>
</head>

<body>

  <p>Demonstrate fadeToggle() with different speed parameters.</p>

  <button>Click to fade in/out boxes</button><br><br>
  <div id="output"></div>

</body>

</html>